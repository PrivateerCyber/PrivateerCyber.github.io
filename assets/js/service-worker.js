const CACHE_NAME='privateer-v5';const STATIC_ASSETS=['/','/index.html','/fr/index.html','/privacy-policy.html','/fr/privacy-policy.html','/terms-of-service.html','/fr/terms-of-service.html','/404.html','/fr/404.html','/offline.html','/assets/css/main.css','/assets/css/privacy-policy.css','/assets/js/main.min.js','/assets/images/logo.png','/assets/images/favicon.ico','/assets/images/apple-touch-icon.png','/assets/images/og-image.webp','/assets/images/og-image.jpg','/assets/images/Team.jpg','/assets/images/Privateer.webp','/assets/images/V75.png','/assets/images/mailsec.png.webp','/assets/images/ftv.webp','/assets/images/Corwik.webp','/assets/videos/ocean-background-optimized.webm','/assets/videos/ocean-background-optimized.mp4','/assets/images/ocean-fallback.webp'];self.addEventListener('install',(event)=>{event.waitUntil(caches.open(CACHE_NAME).then((cache)=>{return cache.addAll(STATIC_ASSETS)}))});self.addEventListener('activate',(event)=>{event.waitUntil(caches.keys().then((cacheNames)=>{return Promise.all(cacheNames.map((cacheName)=>{if(cacheName!==CACHE_NAME){return caches.delete(cacheName)}}))}))});self.addEventListener('fetch',(event)=>{if(!event.request.url.startsWith(self.location.origin)){return}
if(event.request.method!=='GET'){return}
if(event.request.url.includes('/api/')){return}
event.respondWith(caches.match(event.request).then((response)=>{if(response){return response}
const fetchRequest=event.request.clone();return fetch(fetchRequest).then((response)=>{if(!response||response.status!==200||response.type!=='basic'){return response}
const responseToCache=response.clone();caches.open(CACHE_NAME).then((cache)=>{cache.put(event.request,responseToCache)});return response}).catch(()=>{if(event.request.headers.get('accept').includes('text/html')){return caches.match('/offline.html')}})}))});self.addEventListener('push',(event)=>{const options={body:event.data.text(),icon:'/assets/images/logo.png',badge:'/assets/images/favicon.ico',vibrate:[100,50,100],data:{dateOfArrival:Date.now(),primaryKey:1},actions:[{action:'explore',title:'View Details',icon:'/assets/images/favicon.ico'},{action:'close',title:'Close',icon:'/assets/images/favicon.ico'}]};event.waitUntil(self.registration.showNotification('Privateer Cybersecurity',options))});self.addEventListener('notificationclick',(event)=>{event.notification.close();if(event.action==='explore'){event.waitUntil(clients.openWindow('/'))}})