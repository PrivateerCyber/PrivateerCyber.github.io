"use strict";document.addEventListener('DOMContentLoaded',function(){initStructuredData();loadComponents();initTestimonialsCarousel();initServiceCards();initServiceFilters();initHeroVideo();initSmoothScroll();initServiceWorker();console.log("Privateer Cybersecurity site initialization complete")});function initStructuredData(){const organizationData={"@context":"https://schema.org","@type":"Organization","name":"Privateer Cybersecurity","url":"https://privateer.ca","logo":"https://privateer.ca/assets/images/logo.png","foundingDate":"2024","founders":[{"@type":"Person","name":"Mikhael Esterez"}],"address":{"@type":"PostalAddress","addressCountry":"CA"},"contactPoint":{"@type":"ContactPoint","telephone":"+1-514-555-0123","contactType":"customer service","email":"captain@privateer.ca"},"sameAs":["https://www.linkedin.com/company/privateer-cybersecurity/","https://www.instagram.com/privateer.cybersecurity"],"description":"Professional cybersecurity services navigating businesses to safety through dangerous digital waters.","hasOfferCatalog":{"@type":"OfferCatalog","name":"Cybersecurity Services","itemListElement":[{"@type":"Offer","itemOffered":{"@type":"Service","name":"Penetration Testing","description":"Identify vulnerabilities in your systems before hackers do with our comprehensive penetration testing services."}},{"@type":"Offer","itemOffered":{"@type":"Service","name":"Vulnerability Assessment","description":"Automated techniques to identify security weaknesses and vulnerabilities in your systems."}},{"@type":"Offer","itemOffered":{"@type":"Service","name":"Personalized Cyber Defence","description":"Tailored security solutions designed to protect your specific business needs."}},{"@type":"Offer","itemOffered":{"@type":"Service","name":"Executive Advisory","description":"Strategic guidance and oversight from experienced cybersecurity professionals."}},{"@type":"Offer","itemOffered":{"@type":"Service","name":"Virtual CISO","description":"Strategic guidance and oversight from a dedicated experienced virtual Chief Information Security Officer."}},{"@type":"Offer","itemOffered":{"@type":"Service","name":"Cyber Attack Support","description":"Immediate assistance and guidance during and after cyber attacks."}}]}};const breadcrumbData={"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://privateer.ca/"}]};addJsonLdToPage(organizationData);addJsonLdToPage(breadcrumbData)}
function addJsonLdToPage(data){const script=document.createElement('script');script.type="application/ld+json";script.textContent=JSON.stringify(data);document.head.appendChild(script)}
function loadComponents(){console.log("Loading components...");const isFrench=window.location.pathname.includes('/fr/');console.log("Is French site:",isFrench);let headerPath,footerPath;if(isFrench){headerPath='components/header.html';footerPath='components/footer.html';console.log("Using French paths")}else{headerPath='components/header.html';footerPath='components/footer.html';console.log("Using English paths")}
console.log("Header path:",headerPath);console.log("Footer path:",footerPath);const headerContainer=document.getElementById('header-container');if(headerContainer){console.log("Found header container, attempting to load from:",headerPath);fetch(headerPath).then(response=>{if(!response.ok){console.error("Header fetch failed with status:",response.status);throw new Error(`HTTP error! Status: ${response.status}`)}
console.log("Header fetch successful");return response.text()}).then(data=>{console.log("Header loaded, length:",data.length);headerContainer.innerHTML=data;initHeaderFunctionality();console.log("Header initialized")}).catch(error=>{console.error('Error loading header:',error);const fallbackPath=isFrench?'../components/header.html':'components/header.html';console.log("Trying fallback header path:",fallbackPath);fetch(fallbackPath).then(response=>{if(!response.ok)throw new Error(`Fallback HTTP error! Status: ${response.status}`);return response.text()}).then(data=>{headerContainer.innerHTML=data;initHeaderFunctionality();console.log("Header loaded from fallback path")}).catch(fallbackError=>{console.error('Error loading header from fallback path:',fallbackError);createFallbackHeader(headerContainer)})})}else{console.warn("Header container not found")}
const footerContainer=document.getElementById('footer-container');if(footerContainer){console.log("Found footer container, attempting to load from:",footerPath);fetch(footerPath).then(response=>{if(!response.ok){console.error("Footer fetch failed with status:",response.status);throw new Error(`HTTP error! Status: ${response.status}`)}
console.log("Footer fetch successful");return response.text()}).then(data=>{console.log("Footer loaded, length:",data.length);footerContainer.innerHTML=data;updateCopyrightYear();console.log("Footer initialized")}).catch(error=>{console.error('Error loading footer:',error);const fallbackPath=isFrench?'../components/footer.html':'components/footer.html';console.log("Trying fallback footer path:",fallbackPath);fetch(fallbackPath).then(response=>{if(!response.ok)throw new Error(`Fallback HTTP error! Status: ${response.status}`);return response.text()}).then(data=>{footerContainer.innerHTML=data;updateCopyrightYear();console.log("Footer loaded from fallback path")}).catch(fallbackError=>{console.error('Error loading footer from fallback path:',fallbackError);createFallbackFooter(footerContainer)})})}else{console.warn("Footer container not found")}}
function initHeaderFunctionality(){const burger=document.querySelector('.burger');const navLinks=document.querySelector('.nav-links');if(burger&&navLinks){burger.addEventListener('click',function(){navLinks.classList.toggle('active');burger.classList.toggle('active');const isExpanded=burger.getAttribute('aria-expanded')==='true';burger.setAttribute('aria-expanded',isExpanded?'false':'true');document.body.classList.toggle('menu-open',!isExpanded)})}
window.addEventListener('scroll',function(){const header=document.getElementById('header');if(!header)return;if(window.scrollY>50){header.classList.add('scrolled')}else{header.classList.remove('scrolled')}});initLanguageSwitcher()}
function initLanguageSwitcher(){const dropdowns=document.querySelectorAll('.language-dropdown');dropdowns.forEach(dropdown=>{const toggle=dropdown.querySelector('.language-dropdown-toggle');const menu=dropdown.querySelector('.language-dropdown-menu');if(!toggle||!menu)return;toggle.addEventListener('click',function(){const expanded=toggle.getAttribute('aria-expanded')==='true';toggle.setAttribute('aria-expanded',!expanded);if(!expanded){menu.style.opacity='1';menu.style.visibility='visible';menu.style.transform='translateY(0)'}else{menu.style.opacity='0';menu.style.visibility='hidden';menu.style.transform='translateY(-10px)'}});document.addEventListener('click',function(e){if(!dropdown.contains(e.target)){toggle.setAttribute('aria-expanded','false');menu.style.opacity='0';menu.style.visibility='hidden';menu.style.transform='translateY(-10px)'}})})}
function updateCopyrightYear(){const yearElements=document.querySelectorAll('#current-year');const currentYear=new Date().getFullYear();yearElements.forEach(element=>{element.textContent=currentYear})}
function createFallbackHeader(container){console.log("Creating fallback header");const isFrench=window.location.pathname.includes('/fr/');const homeLink=isFrench?'index.html':'index.html';const headerHtml=`
    <header id="header">
      <nav>
        <a href="${homeLink}" class="logo">
          <span class="logo-text">Privateer Cybersecurity</span>
        </a>
        <div class="nav-links">
          <a href="#services">${isFrench ? 'Services' : 'Services'}</a>
          <a href="#about">${isFrench ? 'À Propos' : 'About'}</a>
          <a href="#contact">${isFrench ? 'Contact' : 'Contact'}</a>
          <a href="#contact" class="nav-cta">
            <i class="fas fa-compass"></i> ${isFrench ? 'Consultation Gratuite' : 'Free Consultation'}
          </a>
        </div>
        <button class="burger" aria-label="Toggle menu">
          <div></div>
          <div></div>
          <div></div>
        </button>
      </nav>
    </header>
  `;container.innerHTML=headerHtml;const burger=container.querySelector('.burger');const navLinks=container.querySelector('.nav-links');if(burger&&navLinks){burger.addEventListener('click',function(){navLinks.classList.toggle('active');burger.classList.toggle('active')})}
console.log("Fallback header created")}
function createFallbackFooter(container){console.log("Creating fallback footer");const currentYear=new Date().getFullYear();const isFrench=window.location.pathname.includes('/fr/');const footerHtml=`
    <footer>
      <div class="container">
        <div class="copyright">
          <p>&copy; ${currentYear} Privateer Cybersecurity. ${isFrench ? 'Tous droits réservés.' : 'All rights reserved.'}</p>
        </div>
      </div>
    </footer>
  `;container.innerHTML=footerHtml;console.log("Fallback footer created")}
function initTestimonialsCarousel(){const testimonials=document.querySelectorAll('.testimonial-card');const indicators=document.querySelectorAll('.indicator');const prevBtn=document.querySelector('.control-prev');const nextBtn=document.querySelector('.control-next');if(testimonials.length<=1)return;let currentIndex=0;function showTestimonial(index){currentIndex=index;testimonials.forEach((testimonial,i)=>{const isActive=i===currentIndex;testimonial.classList.toggle('active',isActive);testimonial.setAttribute('aria-hidden',!isActive);testimonial.hidden=!isActive});indicators.forEach((indicator,i)=>{const isActive=i===currentIndex;indicator.classList.toggle('active',isActive);indicator.setAttribute('aria-selected',isActive)})}
function prevTestimonial(){const newIndex=(currentIndex-1+testimonials.length)%testimonials.length;showTestimonial(newIndex)}
function nextTestimonial(){const newIndex=(currentIndex+1)%testimonials.length;showTestimonial(newIndex)}
if(prevBtn){prevBtn.addEventListener('click',prevTestimonial)}
if(nextBtn){nextBtn.addEventListener('click',nextTestimonial)}
indicators.forEach((indicator,index)=>{indicator.addEventListener('click',()=>{showTestimonial(index)})})}
function initServiceCards(){const serviceCards=document.querySelectorAll('.service-card');serviceCards.forEach(card=>{card.addEventListener('mouseenter',()=>{serviceCards.forEach(c=>{c.classList.add('dimmed');c.classList.remove('highlighted')});card.classList.remove('dimmed');card.classList.add('highlighted')});card.addEventListener('mouseleave',()=>{serviceCards.forEach(c=>{c.classList.remove('dimmed');c.classList.remove('highlighted')})})})}
function initServiceFilters(){const toggleButtons=document.querySelectorAll('.toggle-btn');const serviceCards=document.querySelectorAll('.service-card');if(toggleButtons.length===0||serviceCards.length===0)return;toggleButtons.forEach(button=>{button.addEventListener('click',function(){const type=this.getAttribute('data-type');toggleButtons.forEach(btn=>btn.classList.remove('active'));this.classList.add('active');serviceCards.forEach(card=>{const serviceType=card.getAttribute('data-service-type');if(serviceType===type){card.classList.remove('hide')}else{card.classList.add('hide')}})})})}
function initHeroVideo(){const heroVideo=document.querySelector('.hero-video');if(heroVideo){heroVideo.addEventListener('loadeddata',()=>{heroVideo.classList.add('loaded')});heroVideo.addEventListener('error',()=>{heroVideo.classList.add('error');const fallbackImg=document.querySelector('.hero img[aria-hidden="true"]');if(fallbackImg){fallbackImg.style.display='block';heroVideo.style.display='none'}})}}
function initSmoothScroll(){const hashLinks=document.querySelectorAll('a[href^="#"]:not([href="#"])');hashLinks.forEach(link=>{link.addEventListener('click',function(e){const targetId=this.getAttribute('href');const targetElement=document.querySelector(targetId);if(targetElement){e.preventDefault();const headerHeight=80;const targetPosition=targetElement.getBoundingClientRect().top+window.pageYOffset-headerHeight;window.scrollTo({top:targetPosition,behavior:'smooth'})}})})}
function initServiceWorker(){if('serviceWorker' in navigator){window.addEventListener('load',()=>{navigator.serviceWorker.register('/service-worker.js').then(registration=>{console.log('ServiceWorker registration successful')}).catch(err=>{console.log('ServiceWorker registration failed: ',err)})})}}